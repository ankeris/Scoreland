(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(65),o=n.n(r),s=n(12),c=n(92),l=n(24),u=n(17),h=n(7),m=n.n(h),p=n(21),f=n(5),d=n(8),g=n(29),y=n.n(g),b=(n(175),n(177),{apiKey:"AIzaSyASHjzxNgxaMr4gQUa59uR1-a3LiEMOalQ",authDomain:"scoreland-5b767.firebaseapp.com",databaseURL:"https://scoreland-5b767.firebaseio.com",projectId:"scoreland-5b767",storageBucket:"",messagingSenderId:"989321625359"}),v=new(function(){function e(){Object(f.a)(this,e),this.auth=void 0,this.db=void 0,y.a.initializeApp(b),this.auth=y.a.auth(),y.a.firestore().enablePersistence(),this.db=y.a.firestore(),this.auth.setPersistence(y.a.auth.Auth.Persistence.SESSION)}return Object(d.a)(e,[{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return console.log("logging out . . ."),this.auth.signOut()}},{key:"register",value:function(){var e=Object(p.a)(m.a.mark(function e(t,n,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(n,a);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"updateHighestScore",value:function(e,t,n){return this.db.collection("games").doc(e).update({highestScore:t,highestScorer:n})}},{key:"isInitialized",value:function(){var e=this;return new Promise(function(t){e.auth.onAuthStateChanged(t)})}},{key:"getCurrentUsername",value:function(){return console.log(this.auth.currentUser),this.auth.currentUser&&this.auth.currentUser.displayName}},{key:"getOneById",value:function(e,t){var n=this;return new Promise(function(a,i){n.db.collection(e).doc(t).get().then(function(e){a(e)})})}},{key:"subscribeTo",value:function(e,t){this.db.collection(e).onSnapshot(function(e){var n=[];e.forEach(function(e){var t=e.data();t._id=e.id,n.push(t)}),t(n)})}},{key:"getAll",value:function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection(t).get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),w=function(e){return i.a.createElement("header",{className:"App-header bg-dark"},i.a.createElement("div",{className:"flex-row"},i.a.createElement("img",{className:"App-logo",src:"/logo.svg",alt:""}),i.a.createElement("h1",null,"Scoreland"),i.a.createElement(u.b,{to:"/highscores",className:"push-horizontal button button--small"},"Highscores")),i.a.createElement("div",{className:"flex-row"},e.authed?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onClick:function(){return t.apply(this,arguments)},className:"push-horizontal button button--small button--serious button--danger"},"Logout"),i.a.createElement("div",{className:"push-horizontal"},"Hi, ",localStorage.getItem("user"))):i.a.createElement("div",{className:"push-horizontal"},"Not logged in")));function t(){return(t=Object(p.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("trying to log out"),t.next=3,v.logout().then(function(){e.setAuth(!1)});case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}},E=function(){return i.a.createElement("div",null,"hello from auth")},x=function(){return i.a.createElement("div",{className:"lds-ripple"},i.a.createElement("div",null),i.a.createElement("div",null))};function k(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(""),l=Object(s.a)(c,2),h=l[0],f=l[1],d=Object(a.useState)(""),g=Object(s.a)(d,2),y=g[0],b=g[1];return r?i.a.createElement(x,null):i.a.createElement("form",{className:"form content-section content-center push-vertical bg-neutral",onSubmit:function(e){e.preventDefault(),function(){w.apply(this,arguments)}()}},i.a.createElement("h2",null,"\ud83c\udf88welcome to ",i.a.createElement("span",{className:"title"},"SCORELAND"),"\ud83d\udd79\ufe0f"),i.a.createElement("h2",null,i.a.createElement("span",{className:"text-warning"},"get ready")," and ",i.a.createElement("span",{className:"text-success"},"login")," to adventure"),i.a.createElement("label",{className:"push-top"},"Email:"),i.a.createElement("input",{className:"form__input",type:"email",name:"email",value:h,onChange:function(e){return f(e.target.value)}}),i.a.createElement("label",null,"Password:"),i.a.createElement("input",{className:"form__input",type:"password",name:"password",value:y,onChange:function(e){return b(e.target.value)}}),i.a.createElement("div",{className:"flex-row full-width"},i.a.createElement("input",{className:"form__input button button--funky button--serious button--small",type:"submit",value:"Sign In \ud83d\udd2b"}),i.a.createElement(u.b,{to:{pathname:"/register"},className:"button button--danger button--serious button--small"},"Register \ud83d\udcdd")));function w(){return(w=Object(p.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.prev=1,t.next=4,v.login(h,y).then(function(t){localStorage.setItem("user",t.user.displayName),e.setAuth(!0),e.history.push("/library")});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),alert(t.t0);case 9:case"end":return t.stop()}},t,null,[[1,6]])}))).apply(this,arguments)}}var O,S,N=n(49),j=n(48),I=n(50),C=function(e){var t=e.game,n=t.complexity<2?"text-success":t.complexity>=2&&t.complexity<4?"text-warning":"text-danger";return i.a.createElement(u.b,{className:"grid-box__item bg-light button button--funky",to:{pathname:"/game/"+t._id,state:{game:t}}},i.a.createElement("h2",{className:"title"},t.name),i.a.createElement("img",{className:"image",src:t.imagelink,alt:""}),i.a.createElement("h4",null,"Complexity: ",i.a.createElement("span",{className:n},t.complexity)),i.a.createElement("p",null,"Highest score: ",i.a.createElement("span",null,t.highestScore)),i.a.createElement("p",null,"By: ",i.a.createElement("span",null,t.highestScorer,"\ud83e\udd29")))},A=function(e){var t=e.games.length>0;return i.a.createElement(i.a.Fragment,null,t?e.games.map(function(e){return i.a.createElement(C,{key:e._id,game:e})}):i.a.createElement(x,null))},_=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(N.a)(this,Object(j.a)(t).call(this,e))).state={games:[]},n}return Object(I.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.getAll("games").then(function(e){}),v.subscribeTo("games",function(t){e.setState({games:t})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"content-section grid-box push-vertical"},i.a.createElement(A,{games:this.state.games})),i.a.createElement("a",{className:"link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"A Link to somewhere"))}}]),t}(a.Component),D=new function e(){var t=this;Object(f.a)(this,e),this.quotesArr=void 0,this.getRandomQuote=function(){return t.quotesArr[Math.floor(Math.random()*t.quotesArr.length)]},this.quotesArr=["\u201cBelieve in yourself! Have faith in your abilities! Without a humble but reasonable confidence in your own powers you cannot be successful or happy.\u201d","Where there is a will, there is a way. If there is a chance in a million that you can do something, anything, to keep what you want from ending, do it. Pry the door open or, if need be, wedge your foot in that door and keep it open.","Do not wait; the time will never be \u2018just right\u2018.","Start where you stand, and work with whatever tools you may have at your command, and better tools will be found as you go along.","Press forward. Do not stop, do not linger in your journey, but strive for the mark set before you.","The future belongs to those who believe in the beauty of their dreams.","Aim for the moon. If you miss, you may hit a star.","Don\u2019t watch the clock; do what it does. Keep going.","Keep your eyes on the stars, and your feet on the ground.","We aim above the mark to hit the mark.","One way to keep momentum going is to have constantly greater goals.","Change your life today. Don\u2019t gamble on the future, act now, without delay.","You just can\u2019t beat the person who never gives up.","Start where you are. Use what you have. Do what you can.","Why should you continue going after your dreams? Because seeing the look on the faces of the people who said you couldn\u2019t\u2026 will be priceless.","Never give up, for that is just the place and time that the tide will turn.","The Way Get Started Is To Quit Talking And Begin Doing.","The Pessimist Sees Difficulty In Every Opportunity. The Optimist Sees Opportunity In Every Difficulty.","Don\u2019t Let Yesterday Take Up Too Much Of Today.","You Learn More From Failure Than From Success. Don\u2019t Let It Stop You. Failure Builds Character.","It\u2019s Not Whether You Get Knocked Down, It\u2019s Whether You Get Up."]},L=n(91),R=n.n(L),P=function(e){var t=e.text,n=e.link,a=e.modifier;return i.a.createElement("a",{className:"grid-box__item content-center bg-light button button--".concat(a),href:n},t)},T=n(27),W=n.n(T),M=0,U=[],z="Press here to spawn a ball",B=function(e){return new W.a(function(t){t.pointsCounter=function(){t.textAlign(t.LEFT),t.text(M,10,30),t.textSize(12),t.textAlign(t.CENTER),t.text(z,t.width/2,t.height/2),t.fill(255)},t.setup=function(){t.createCanvas(660,260).parent("myContainer"),O=new n(160,250,70,10,5,5)},t.mousePressed=function(){U.length<3&&U.push(new a(t.mouseX,t.mouseY)),z=""},t.draw=function(){t.background(100),t.fill(255),t.textSize(16),t.textAlign(t.LEFT),t.text("control with right/left arrow",10,50),t.fill(22,180,200),t.textSize(22),t.pointsCounter(),O.displayRect(),O.keyIsDown(),O.fixed();for(var e=0;e<U.length;e++)U[e].display(),U[e].move(),U[e].ballWallHit(),U[e].bounceOfRectangle()};var n=function(){function e(t,n,a,i,r,o){Object(f.a)(this,e),this.x=void 0,this.y=void 0,this.w=void 0,this.h=void 0,this.xspeed=void 0,this.yspeed=void 0,this.x=t,this.y=n,this.w=a,this.h=i,this.xspeed=r,this.yspeed=o}return Object(d.a)(e,[{key:"displayRect",value:function(){t.rectMode(t.CENTER),t.fill(125,220,10),t.rect(this.x,this.y,this.w,this.h)}},{key:"keyIsDown",value:function(){t.keyIsDown(t.RIGHT_ARROW)?this.x=this.x+this.xspeed:t.keyIsDown(t.LEFT_ARROW)&&(this.x=this.x-this.xspeed)}},{key:"fixed",value:function(){this.x=t.constrain(this.x,25,t.width-25)}}]),e}(),a=function(){function n(e,t){Object(f.a)(this,n),this.x=void 0,this.y=void 0,this.xspeed=void 0,this.yspeed=void 0,this.r=void 0,this.x=e,this.y=t,this.xspeed=-5,this.yspeed=-6,this.r=20}return Object(d.a)(n,[{key:"display",value:function(){t.fill(255),t.ellipse(this.x,this.y,this.r,this.r)}},{key:"move",value:function(){this.x=this.x+this.xspeed,this.y=this.y+this.yspeed}},{key:"ballWallHit",value:function(){(this.x>t.width||this.x<=0)&&(this.xspeed=-1*this.xspeed),this.y<5&&(this.yspeed=-1*this.yspeed)}},{key:"bounceOfRectangle",value:function(){this.y>=240&&this.y<=245&&this.x<O.x+O.w/2&&this.x>O.x-O.w/2&&(this.yspeed=-1*this.yspeed,this.xspeed>0?this.xspeed=Math.floor(5*Math.random()):this.xspeed=Math.floor(-4*Math.random()),M+=1),this.y>290&&(e(M),t.remove(),t.clear())}}]),n}()})},F=function(){function e(t){Object(f.a)(this,e),this.p5=t,this.spacing=110,this.top=this.p5.random(this.p5.height/8,.75*this.p5.height),this.bottom=this.p5.height-(this.top+this.spacing),this.x=this.p5.width,this.w=60,this.speed=8,this.highlight=!1,this.potential=!0}return Object(d.a)(e,[{key:"hits",value:function(e){return(e.y<this.top||e.y>this.p5.height-this.bottom)&&e.x>this.x&&e.x<this.x+this.w?(this.highlight=!0,!0):(this.highlight=!1,!1)}},{key:"isPoint",value:function(e){return!!(this.potential&&e.x>this.x&&e.x<this.x+this.w)&&(this.potential=!1,!0)}},{key:"show",value:function(){this.p5.fill(255),this.highlight&&this.p5.fill(255,0,0),this.p5.rect(this.x,0,this.w,this.top),this.p5.rect(this.x,this.p5.height-this.bottom,this.w,this.bottom)}},{key:"update",value:function(){this.x-=this.speed}},{key:"offscreen",value:function(){return this.x<-this.w}}]),e}(),H=function(){function e(t){Object(f.a)(this,e),this.p5=t,this.y=this.p5.height/2,this.x=64,this.gravity=.4,this.lift=-10,this.velocity=0}return Object(d.a)(e,[{key:"show",value:function(){this.p5.fill(255),this.p5.ellipse(this.x,this.y,32,32)}},{key:"up",value:function(){this.velocity+=this.lift}},{key:"update",value:function(){this.velocity+=this.gravity,this.y+=this.velocity,this.y>this.p5.height&&(this.y=this.p5.height,this.velocity=0),this.y<0&&(this.y=0,this.velocity=0)}}]),e}(),G=[],Y=0,Q=function(e){return new W.a(function(t){t.setup=function(){t.createCanvas(800,260).parent("myContainer"),S=new H(t),G.push(new F(t))},t.draw=function(){t.background(0);for(var n=G.length-1;n>=0;n--)G[n].show(),G[n].update(),G[n].hits(S)&&(e(Y),t.remove(),t.clear()),G[n].offscreen()&&G.splice(n,1),G[n].isPoint(S)&&Y++;S.update(),S.show(),t.frameCount%45==0&&G.push(new F(t))},t.keyPressed=function(e){" "==e.key&&S.up()}})},q=10,K="right",J=10,X=[],$=[],V=0,Z=0,ee=0,te=function(e){return new W.a(function(t){function n(){V=10*t.floor(t.random(10,(t.width-100)/10)),Z=10*t.floor(t.random(10,(t.height-100)/10))}t.setup=function(){t.text(ee,10,30),t.textSize(12),t.textAlign(t.CENTER),t.fill(255),t.createCanvas(500,500).parent("myContainer"),t.frameRate(15),t.stroke(255),t.strokeWeight(10),n();for(var e=0;e<q;e++)X.push(0+e*J),$.push(250)},t.draw=function(){t.background(0);for(var a=0;a<q-1;a++)t.line(X[a],$[a],X[a+1],$[a+1]);!function(){for(var e=0;e<q-1;e++)X[e]=X[e+1],$[e]=$[e+1];switch(K){case"right":X[q-1]=X[q-2]+J,$[q-1]=$[q-2];break;case"up":X[q-1]=X[q-2],$[q-1]=$[q-2]-J;break;case"left":X[q-1]=X[q-2]-J,$[q-1]=$[q-2];break;case"down":X[q-1]=X[q-2],$[q-1]=$[q-2]+J}}(),(X[X.length-1]>t.width||X[X.length-1]<0||$[$.length-1]>t.height||$[$.length-1]<0||function(){for(var e=X[X.length-1],t=$[$.length-1],n=0;n<X.length-1;n++)if(X[n]===e&&$[n]===t)return!0}())&&(t.noLoop(),e(ee),t.remove(),t.clear()),t.point(V,Z),X[X.length-1]===V&&$[$.length-1]===Z&&(ee++,X.unshift(X[0]),$.unshift($[0]),q++,n())},t.keyPressed=function(){switch(t.keyCode){case 74:"right"!==K&&(K="left");break;case 76:"left"!==K&&(K="right");break;case 73:"down"!==K&&(K="up");break;case 75:"up"!==K&&(K="down")}}})},ne=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(N.a)(this,Object(j.a)(t).call(this,e))).startGame=function(){switch(console.log("received: "+n.state.gameInfo.name),n.state.gameInfo.name){case"Self pong":B(function(e){n.setState({gameLost:!0,score:e}),n.tryUpdateScore(e)});break;case"Scorebird":Q(function(e){n.setState({gameLost:!0,score:e}),n.tryUpdateScore(e)});break;case"Scuffed Snake":te(function(e){n.setState({gameLost:!0,score:e}),n.tryUpdateScore(e)})}},n.tryUpdateScore=function(e){e>n.state.gameInfo.highestScore&&v.updateHighestScore(n.state.gameInfo._id,e,localStorage.getItem("user"))},n.clearCanvas=function(){n.setState({gameCanvas:null})},n.state={gameCanvas:null,gameInfo:{name:"",complexity:0,highestScore:0,highestScorer:"",_id:""},gameLost:!1,score:0},n}return Object(I.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;console.log(t),v.getOneById("games",t).then(function(t){var n=t.data();n._id=t.id,e.setState({gameInfo:n}),e.startGame()})}},{key:"render",value:function(){return this.state.gameInfo?i.a.createElement("div",{className:"content-section content-center"},i.a.createElement(P,{modifier:"danger",text:"Go back",link:"/library"}),i.a.createElement("h1",{className:"title"},this.state.gameInfo.name),this.state.gameLost?i.a.createElement("div",{className:"content-center"},i.a.createElement("h2",null,i.a.createElement(R.a,{end:this.state.score,className:"title",prefix:"score: "})),i.a.createElement("p",null,D.getRandomQuote()),i.a.createElement("div",{className:"grid-box"},i.a.createElement(P,{text:"Go Back",link:"/library",modifier:"danger"}),i.a.createElement(P,{modifier:"success",text:"Restart",link:"/game/"+this.state.gameInfo._id}))):i.a.createElement("div",{id:"myContainer"})):i.a.createElement(x,null)}}]),t}(a.Component);function ae(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(""),l=Object(s.a)(c,2),h=l[0],f=l[1],d=Object(a.useState)(""),g=Object(s.a)(d,2),y=g[0],b=g[1];return i.a.createElement("form",{className:"form content-section content-center push-vertical bg-neutral",onSubmit:function(e){e.preventDefault(),function(){w.apply(this,arguments)}()}},i.a.createElement("h2",null,"We're happy to see you join!\ud83c\udf89\ud83d\udc2e"),i.a.createElement("label",{className:"push-top"},"Nickname - how people will see you:"),i.a.createElement("input",{className:"form__input",type:"text",value:r,onChange:function(e){return o(e.target.value)}}),i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"form__input",name:"email",type:"email",value:h,onChange:function(e){return f(e.target.value)}}),i.a.createElement("label",null,"Password:"),i.a.createElement("input",{className:"form__input",type:"password",name:"password",value:y,onChange:function(e){return b(e.target.value)}}),i.a.createElement("div",{className:"flex-row"},i.a.createElement(u.b,{to:{pathname:"/login"},className:"form__input button button--danger button--serious button--small"},"Go back"),i.a.createElement("input",{className:"form__input button button--funky button--serious button--small",type:"submit",value:"Finish \u2714\ufe0f"})));function w(){return(w=Object(p.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.register(r,h,y);case 3:e.history.replace("/library"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),alert(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))).apply(this,arguments)}}var ie=n(51);n(202);function re(e){var t=e.component,n=e.authed,a=Object(c.a)(e,["component","authed"]);return i.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?i.a.createElement(t,e):i.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var oe=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(s.a)(o,2),h=c[0],m=c[1];return Object(a.useEffect)(function(){window.addEventListener("load",function(){var e=function(e){"offline"==e.type?ie.NotificationManager.warning("No network connection. Some functionalities might be unavailable","Offline mode",5e3):ie.NotificationManager.success("Your browser is online again","Online",5e3)};window.addEventListener("online",e),window.addEventListener("offline",e)}),v.isInitialized().then(function(e){e?(r(!0),m(!0)):(m(!0),r(!1))})},[]),h?i.a.createElement(u.a,null,i.a.createElement(w,{setAuth:function(e){return r(e)},authed:n}),i.a.createElement(l.d,null,i.a.createElement(l.b,{path:"/login",exact:!0,render:function(e){return i.a.createElement(k,Object.assign({},e,{setAuth:function(e){return r(e)}}))}}),i.a.createElement(l.b,{path:"/register",exact:!0,render:function(e){return i.a.createElement(ae,e)}}),i.a.createElement(l.b,{path:"/auth",exact:!0,render:function(e){return i.a.createElement(E,e)}}),i.a.createElement(re,{authed:n,path:"/library",exact:!0,component:_}),i.a.createElement(re,{authed:n,path:"/game/:id",exact:!0,component:ne}),i.a.createElement(l.a,{from:"/",to:"/library"})),i.a.createElement(ie.NotificationContainer,null)):i.a.createElement(x,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},93:function(e,t,n){e.exports=n(203)}},[[93,1,2]]]);
//# sourceMappingURL=main.16a89bc3.chunk.js.map